import{k as x,c as B,r as R,m as S,o as r,g as l,q as y,j as s,aa as M,D as _,u as d,at as W,z as A,b as f,l as D,w as H,t as $,a7 as U,ay as j,ap as b,a8 as k,au as P,n as q}from"./index-1eac033a.js";import{a as V}from"./index-377d0bc9.js";import{u as E}from"./useTitle-8884d4bc.js";import{u as F}from"./useScrollAnimate-4894d8db.js";import{h as G}from"./moment-fbc5633a.js";/* empty css                                                                */const I=function(n="auto"){window.scrollTo({top:0})},L={class:"cart-note-item"},J=["data_src"],K={class:"note-introduce"},O={class:"introduce-tips"},Q={class:"publish-date"},X={class:"note-title"},Y={class:"note-description"},Z={__name:"NoteItem",props:["note","order"],setup(n){const m=n;let p="/src/assets/images/animations/rows/Pz-0050.jpg";const t=m.note,a=B(()=>G(t.createTime).format("yyyy-MM-DD  HH:mm:ss")),g=R({backgroundImage:p});return t.img.isHasImg&&(g.backgroundImage=t.img.imgUrl),(N,w)=>{const v=S("lazy");return r(),l("div",L,[y(s("div",{class:M(["note-item-pic",n.order?"after":""]),data_src:g.backgroundImage},null,10,J),[[v]]),s("div",K,[s("div",O,[s("div",Q,_(a.value),1)]),s("h2",X,_(d(t).title),1),s("div",Y,_(d(t).description),1)])])}}},tt=x(Z,[["__scopeId","data-v-36dc76a1"]]),u=(n={pageWhich:1,pageNum:10})=>W({method:"get",url:"/api/web/notes",params:n}),et={class:"cart-note-list"},at=["onClick"],st={class:"page-nav"},ot={class:"page-list"},nt=["onClick"],ct={__name:"NoteNav",setup(n){E();const m=F(),p=V(),t=A(),a=f(1);(async()=>{const e=await u();t.notesData=e.data})();function N(e,c){p.push({path:"/note/content",query:{noteIndex:c}}),t.title=e.title}async function w(e){a.value=e;const c=await u({pageWhich:a.value,pageNum:10});t.notesData=c.data,await q(),I()}async function v(){a.value++;const e=await u({pageWhich:a.value,pageNum:10});t.notesData=e.data,I()}async function T(){a--;const e=await u({pageWhich:a.value,pageNum:10});t.notesData=e.data,I()}let h=f(1);D(()=>{H(()=>t.hasMeInfo,(e,c)=>{console.log("new:",e,"old:",c);const o=t.meInfo.noteInfo.notesCount;h.value=Math.ceil(o/10)})});let C=f([]);return D(()=>{m.start(C,{activeClass:["animate__animated","animate__fadeInUp"]})}),(e,c)=>(r(),l(k,null,[s("div",et,[$(j,{"enter-active-class":"animate__animated animate__fadeInUp"},{default:U(()=>[(r(!0),l(k,null,P(d(t).notesData,(o,i)=>(r(),l("div",{class:"note-item",onClick:z=>N(o,i),ref_for:!0,ref_key:"noteItems",ref:C,key:o._id},[$(tt,{note:o,order:i%2==0?0:1},null,8,["note","order"])],8,at))),128))]),_:1})]),s("div",st,[y(s("div",{class:"back-page",onClick:T},"上一页",512),[[b,a.value!==1]]),s("div",ot,[(r(!0),l(k,null,P(d(h),(o,i)=>(r(),l("div",{class:M(["page-item",i+1==a.value?"active":""]),onClick:z=>w(i+1),key:i},_(o),11,nt))),128))]),y(s("div",{class:"next-page",onClick:v},"下一页",512),[[b,a.value!==d(h)]])])],64))}},mt=x(ct,[["__scopeId","data-v-8a385a39"]]);export{mt as default};
